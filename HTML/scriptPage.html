<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
p {
	color: #ff5500;
	}
</style>
</head>
<body onload="startGame()">
<br>
<a href="http://188.113.117.203/myPage.html">back to index</a>
<br>
<script>

var myGamePiece;
var player2;
var ball;


function startGame() {
    	myGameArea.start();
    	myGamePiece = new component(30, 30, "red", 10, 120);
	player2 = new component(30, 30, "blue", 50, 120);
	ball = new component(15, 15, "grey", 40, 200);
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 50);
        window.addEventListener('keydown', function (e) {
            myGameArea.key = e.keyCode;
        })
        window.addEventListener('keyup', function (e) {
            myGameArea.key = false;
        })
    }, 
    clear : function(){
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }
}

function component(width, height, color, x, y) {
    this.gamearea = myGameArea;
    this.width = width;
    this.height = height;
    this.speedX = 0;
    this.speedY = 0;    
    this.x = x;
    this.y = y;    
    this.update = function() {
        ctx = myGameArea.context;
        ctx.fillStyle = color;
        ctx.fillRect(this.x, this.y, this.width, this.height);
    }
    this.newPos = function() {
        this.x += this.speedX;
        this.y += this.speedY;        
    }
}

function updateGameArea() {
    	myGameArea.clear();    
    	myGamePiece.speedX = myGamePiece.speedX*0.9;
    	myGamePiece.speedY = myGamePiece.speedY*0.9;
	player2.speedX = player2.speedX*0.9;
	player2.speedY = player2.speedY*0.9;
    	ball.speedX = ball.speedX*0.9;
	ball.speedY = ball.speedY*0.9;

    	if (myGameArea.key && myGameArea.key == 37) {myGamePiece.speedX = -4; }
    	if (myGameArea.key && myGameArea.key == 39) {myGamePiece.speedX = 4; }
    	if (myGameArea.key && myGameArea.key == 38) {myGamePiece.speedY = -4; }
    	if (myGameArea.key && myGameArea.key == 40) {myGamePiece.speedY = 4; }
 
    	if (myGameArea.key && myGameArea.key == 65) {player2.speedX = -4; }
    	if (myGameArea.key && myGameArea.key == 68) {player2.speedX = 4; }
    	if (myGameArea.key && myGameArea.key == 87) {player2.speedY = -4; }
    	if (myGameArea.key && myGameArea.key == 83) {player2.speedY = 4; }
    
	var comp1, comp2, comp3, comp4, comp5, comp6, comp7, comp8;	
	comp1 = Math.abs(ball.x - myGamePiece.x);
	comp2 = (myGamePiece.width + ball.width)/2;
	comp3 = Math.abs(ball.y - myGamePiece.y);
	comp4 = (myGamePiece.height + ball.height)/2;
	comp5 = Math.abs(ball.x - player2.x);
	comp6 = (myGamePiece.width+player2.width)/2;
	comp7 = Math.abs(ball.y - player2.y);
	comp8 = (player2.height + ball.height)/2;
	
	if ( (comp1 < comp2) && (comp3 < comp4) ){
		ball.speedX = myGamePiece.speedX*2;
		ball.speedY = myGamePiece.speedY*2;
	}
	
	else if ( (comp5 < comp6) && (comp7 < comp8) ){
		ball.speedX = player2.speedX*2;
		ball.speedY = player2.speedY*2;
	}
	
	
	ball.newPos();
	ball.update();   	
	player2.newPos();
	player2.update();
	myGamePiece.newPos();    
    	myGamePiece.update();
}
</script>
<br>
<button> A useless button</button>
<button> nother button</button>
<button> Surprise button</button>
<p>Javascript test, piltaster for bevegelse, copy paste fra en eller annen tutorial</p>
</body>
</html>



